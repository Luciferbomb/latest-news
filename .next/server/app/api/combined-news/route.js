(()=>{var e={};e.id=445,e.ids=[445],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2983:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>c,serverHooks:()=>g,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{GET:()=>p});var n=r(2706),a=r(8203),o=r(5994),i=r(9187);let l="0a3970c61b3346f28a0cfa28d0be700a";async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("q")||"artificial intelligence";console.log(`Fetching news with query: ${r}`);let s=[],n={newscatcher:"not_attempted",serpApi:"not_attempted"};try{let e=[fetch(`https://newsapi.org/v2/top-headlines?category=technology&pageSize=15&language=en&apiKey=${l}`),fetch(`https://newsapi.org/v2/everything?q=${encodeURIComponent(r)}&sortBy=relevancy&pageSize=15&language=en&apiKey=${l}`),fetch(`https://newsapi.org/v2/everything?q=${encodeURIComponent(r)}&sortBy=publishedAt&pageSize=15&language=en&apiKey=${l}`)],t=await Promise.all(e),a=!1;for(let e of t)if(e.ok){a=!0;let t=await e.json();if("ok"===t.status&&t.articles&&t.articles.length>0){let e=t.articles.map(e=>({id:`newsapi-${Math.random().toString(36).substring(2)}`,title:e.title,description:e.description||e.content||"",imageUrl:e.urlToImage||"https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=1965&auto=format&fit=crop",date:e.publishedAt||new Date().toISOString(),readTime:`${Math.ceil((e.content||"").length/200||3)} min read`,url:e.url,source:e.source?.name||"News Source",categories:["ai","technology"]}));s=[...s,...e]}}if(a)n={newscatcher:"not_used",serpApi:"not_used",newsApi:"success"};else throw Error("All NewsAPI requests failed")}catch(e){console.error("Error fetching from real APIs:",e)}if(0===s.length)return console.log("No news data available from API"),i.NextResponse.json({news:[],lastUpdated:new Date().toISOString(),error:"No news data available",sources:{newscatcher:"failed",serpApi:"failed",newsApi:"failed"}},{status:404});s.sort((e,t)=>{let r=new Date(e.date);return new Date(t.date).getTime()-r.getTime()});let a=(function(e){let t=new Map;for(let r of e){let e=r.title.toLowerCase().replace(/[^a-z0-9]/g,"");(!t.has(e)||t.get(e).imageUrl.includes("unsplash.com")&&!r.imageUrl.includes("unsplash.com"))&&t.set(e,r)}return Array.from(t.values())})(s).map(e=>({...e,sentiment:function(){let e=["positive","negative","neutral"];return e[Math.floor(Math.random()*e.length)]}(),sentimentScore:Math.random(),summary:e.description.length>120?e.description.substring(0,120)+"...":e.description}));return i.NextResponse.json({news:a,lastUpdated:new Date().toISOString(),sources:{...n,newsApi:n.newsApi||"using_mock"}},{status:200})}catch(e){return console.error("Error providing mock news:",e),i.NextResponse.json({news:[],lastUpdated:new Date().toISOString(),error:e.message},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/combined-news/route",pathname:"/api/combined-news",filename:"route",bundlePath:"app/api/combined-news/route"},resolvedPagePath:"/Users/ashutoshranjan/test/src/app/api/combined-news/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:u,workUnitAsyncStorage:d,serverHooks:g}=c;function h(){return(0,o.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:d})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,452],()=>r(2983));module.exports=s})();