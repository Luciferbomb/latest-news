{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutoshranjan/test/latest-news/src/app/api/combined-news/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\n// API keys - in production, these should be in environment variables\nconst NEWS_API_KEY = process.env.NEWS_API_KEY || '0a3970c61b3346f28a0cfa28d0be700a';\n\n// Define a type for news items\ninterface NewsItem {\n  id: string;\n  title: string;\n  description: string;\n  imageUrl: string;\n  date: string;\n  readTime: string;\n  url: string;\n  source: string;\n  categories: string[];\n  sentiment?: string;\n  sentimentScore?: number;\n  summary?: string;\n}\n\n// Define a type for source status\ninterface SourceStatus {\n  newscatcher: string;\n  serpApi: string;\n  newsApi?: string;\n}\n\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const query = searchParams.get('q') || 'AI tools OR AI agents OR artificial intelligence technology';\n    \n    console.log(`Fetching news with query: ${query}`);\n    \n    let newsData: NewsItem[] = [];\n    let sourcesStatus: SourceStatus = {\n      newscatcher: 'not_attempted',\n      serpApi: 'not_attempted'\n    };\n    \n    // Try to fetch from NewsAPI.org\n    try {\n      // Make multiple requests to get comprehensive news coverage\n      const apiRequests = [\n        // Top headlines in technology category\n        fetch(`https://newsapi.org/v2/top-headlines?category=technology&pageSize=15&language=en&apiKey=${NEWS_API_KEY}`),\n        \n        // Everything with AI query, sorted by relevance\n        fetch(`https://newsapi.org/v2/everything?q=${encodeURIComponent(query)}&sortBy=relevancy&pageSize=15&language=en&apiKey=${NEWS_API_KEY}`),\n        \n        // Everything with AI query, sorted by date\n        fetch(`https://newsapi.org/v2/everything?q=${encodeURIComponent(query)}&sortBy=publishedAt&pageSize=15&language=en&apiKey=${NEWS_API_KEY}`)\n      ];\n      \n      // Execute API requests in parallel\n      const responses = await Promise.all(apiRequests);\n      \n      // Check if any request was successful\n      let successfulResponse = false;\n      \n      for (const response of responses) {\n        if (response.ok) {\n          successfulResponse = true;\n          const data = await response.json();\n          \n          if (data.status === 'ok' && data.articles && data.articles.length > 0) {\n            const articles = data.articles.map((article: any) => ({\n              id: `newsapi-${Math.random().toString(36).substring(2)}`,\n              title: article.title,\n              description: article.description || article.content || '',\n              imageUrl: article.urlToImage || 'https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=1965&auto=format&fit=crop',\n              date: article.publishedAt || new Date().toISOString(),\n              readTime: `${Math.ceil(((article.content || '').length / 200) || 3)} min read`,\n              url: article.url,\n              source: article.source?.name || 'News Source',\n              categories: ['ai', 'technology']\n            }));\n            \n            newsData = [...newsData, ...articles];\n          }\n        }\n      }\n      \n      if (successfulResponse) {\n        sourcesStatus = {\n          newscatcher: 'not_used',\n          serpApi: 'not_used',\n          newsApi: 'success'\n        };\n      } else {\n        throw new Error('All NewsAPI requests failed');\n      }\n    } catch (apiError) {\n      console.error('Error fetching from real APIs:', apiError);\n    }\n    \n    // If we couldn't get data from real APIs or there was an error, return empty array\n    if (newsData.length === 0) {\n      console.log('No news data available from API');\n      // Return empty array instead of mock data\n      return NextResponse.json({\n        news: [],\n        lastUpdated: new Date().toISOString(),\n        error: 'No news data available',\n        sources: {\n          newscatcher: 'failed',\n          serpApi: 'failed',\n          newsApi: 'failed'\n        }\n      }, { status: 404 });\n    }\n    \n    // Sort by date (most recent first)\n    newsData.sort((a, b) => {\n      const dateA = new Date(a.date);\n      const dateB = new Date(b.date);\n      return dateB.getTime() - dateA.getTime();\n    });\n    \n    // Remove duplicates based on title similarity\n    const uniqueNews = removeDuplicates(newsData);\n    \n    // Enhance news items with AI features\n    const enhancedNews = uniqueNews.map(item => ({\n      ...item,\n      sentiment: getRandomSentiment(),\n      sentimentScore: Math.random(),\n      summary: item.description.length > 120 \n        ? item.description.substring(0, 120) + '...'\n        : item.description\n    }));\n    \n    return NextResponse.json({\n      news: enhancedNews,\n      lastUpdated: new Date().toISOString(),\n      sources: {\n        ...sourcesStatus,\n        newsApi: sourcesStatus.newsApi || 'using_mock'\n      }\n    }, { status: 200 });\n  } catch (error: any) {\n    console.error('Error providing mock news:', error);\n    \n    return NextResponse.json({\n      news: [],\n      lastUpdated: new Date().toISOString(),\n      error: error.message\n    }, { status: 500 });\n  }\n}\n\n// Helper function to get random sentiment\nfunction getRandomSentiment() {\n  const sentiments = ['positive', 'negative', 'neutral'];\n  return sentiments[Math.floor(Math.random() * sentiments.length)];\n}\n\n// Helper function to format dates\nfunction formatDate(date: Date): string {\n  const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n  return `${months[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;\n}\n\n// Helper function to subtract days from current date\nfunction subtractDays(days: number): Date {\n  const date = new Date();\n  date.setDate(date.getDate() - days);\n  return date;\n}\n\n// Helper function to remove duplicate news items\nfunction removeDuplicates(newsItems: NewsItem[]): NewsItem[] {\n  const uniqueMap = new Map();\n  \n  for (const item of newsItems) {\n    // Create a normalized version of the title for comparison\n    const normalizedTitle = item.title.toLowerCase().replace(/[^a-z0-9]/g, '');\n    \n    // If we haven't seen this title before, or if this item has a better image, keep it\n    if (!uniqueMap.has(normalizedTitle) || \n        (uniqueMap.get(normalizedTitle).imageUrl.includes('unsplash.com') && !item.imageUrl.includes('unsplash.com'))) {\n      uniqueMap.set(normalizedTitle, item);\n    }\n  }\n  \n  return Array.from(uniqueMap.values());\n}\n\n// Mock news data\nfunction getMockNewsData() {\n  return [\n    {\n      id: 'mock-1',\n      title: 'Claude 3.5 Sonnet: Anthropic\\'s New AI Model Outperforms GPT-4 on Reasoning Benchmarks',\n      description: 'Anthropic has released Claude 3.5 Sonnet, their latest AI model that demonstrates superior performance on reasoning tasks compared to OpenAI\\'s GPT-4. The model features enhanced contextual understanding, better instruction following, and reduced hallucination rates.',\n      imageUrl: 'https://images.unsplash.com/photo-1677442135136-760c813a1e2a?q=80&w=1932&auto=format&fit=crop',\n      date: formatDate(subtractDays(1)),\n      readTime: '4 min read',\n      url: 'https://example.com/claude-3.5-sonnet',\n      source: 'Anthropic',\n      categories: ['ai-tools', 'large-language-models', 'nlp']\n    },\n    {\n      id: 'mock-2',\n      title: 'Perplexity Launches AI Search Pro with Real-Time Data and Custom Knowledge Integration',\n      description: 'Perplexity has expanded its AI search capabilities with a new Pro tier that offers real-time data access, integration with custom knowledge bases, and enhanced citation accuracy. The tool aims to revolutionize information discovery for both casual users and professionals.',\n      imageUrl: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=1770&auto=format&fit=crop',\n      date: formatDate(subtractDays(2)),\n      readTime: '5 min read',\n      url: 'https://example.com/perplexity-ai-search-pro',\n      source: 'Perplexity AI',\n      categories: ['ai-tools', 'search', 'information-retrieval']\n    },\n    {\n      id: 'mock-3',\n      title: 'Microsoft Copilot Studio: New No-Code Platform for Building Custom AI Agents',\n      description: 'Microsoft has launched Copilot Studio, a no-code platform allowing businesses to create customized AI agents. The tool enables integration with enterprise data, custom workflows, and specialized knowledge bases without requiring programming expertise.',\n      imageUrl: 'https://images.unsplash.com/photo-1589254065878-42c9da997008?q=80&w=1770&auto=format&fit=crop',\n      date: formatDate(subtractDays(3)),\n      readTime: '6 min read',\n      url: 'https://example.com/microsoft-copilot-studio',\n      source: 'Microsoft',\n      categories: ['ai-tools', 'no-code', 'productivity']\n    },\n    {\n      id: 'mock-4',\n      title: 'Stability AI Releases Stable Diffusion 3 With Unprecedented Image Quality',\n      description: 'Stability AI has unveiled Stable Diffusion 3, their latest image generation model featuring remarkable improvements in quality, coherence, and artistic control. The new model supports enhanced text-to-image capabilities and better follows complex prompts.',\n      imageUrl: 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=1770&auto=format&fit=crop',\n      date: formatDate(subtractDays(4)),\n      readTime: '3 min read',\n      url: 'https://example.com/stable-diffusion-3',\n      source: 'Stability AI',\n      categories: ['ai-tools', 'image-generation', 'creative']\n    },\n    {\n      id: 'mock-5',\n      title: 'ChatGPT Enterprise Adds Code Interpreter 2.0 with Enhanced Data Analysis Capabilities',\n      description: 'OpenAI has rolled out a major update to ChatGPT Enterprise\\'s Code Interpreter, featuring improved data analysis, support for larger datasets, and interactive data visualization tools. The update allows businesses to process and analyze complex data directly within the chat interface.',\n      imageUrl: 'https://images.unsplash.com/photo-1580273916550-e323be2ae537?q=80&w=1964&auto=format&fit=crop',\n      date: formatDate(subtractDays(5)),\n      readTime: '4 min read',\n      url: 'https://example.com/chatgpt-code-interpreter-2',\n      source: 'OpenAI',\n      categories: ['ai-tools', 'data-analysis', 'enterprise']\n    },\n    {\n      id: 'mock-6',\n      title: 'Notion AI Gets Major Upgrade with Writing Styles and Document Intelligence',\n      description: 'Notion has significantly expanded its AI capabilities with customizable writing styles, document summarization, and intelligent organization features. The new tools help users create content faster while maintaining their unique voice across different document types.',\n      imageUrl: 'https://images.unsplash.com/photo-1611273426858-450e7f08d0bf?q=80&w=1770&auto=format&fit=crop',\n      date: formatDate(subtractDays(6)),\n      readTime: '5 min read',\n      url: 'https://example.com/notion-ai-upgrade',\n      source: 'Notion',\n      categories: ['ai-tools', 'productivity', 'content-creation']\n    },\n    {\n      id: 'mock-7',\n      title: 'Midjourney v6 Introduces Ultra-Realistic Mode and Advanced Compositing',\n      description: 'Midjourney has released version 6 of its AI image generator with a new ultra-realistic mode, improved compositional understanding, and enhanced style adaptation capabilities. The update gives artists and designers unprecedented control over generated imagery.',\n      imageUrl: 'https://images.unsplash.com/photo-1580894732444-8ecded7900cd?q=80&w=1770&auto=format&fit=crop',\n      date: formatDate(subtractDays(7)),\n      readTime: '4 min read',\n      url: 'https://example.com/midjourney-v6',\n      source: 'Midjourney',\n      categories: ['ai-tools', 'image-generation', 'creative']\n    },\n    {\n      id: 'mock-8',\n      title: 'GitHub Copilot Enterprise Adds Project-Specific Intelligence and Custom Policies',\n      description: 'GitHub has enhanced Copilot Enterprise with project-specific AI models that understand proprietary codebases and company-specific development patterns. The update also introduces customizable security policies and improved code documentation features.',\n      imageUrl: 'https://images.unsplash.com/photo-1618401471353-b98afee0b2eb?q=80&w=1776&auto=format&fit=crop',\n      date: formatDate(subtractDays(8)),\n      readTime: '5 min read',\n      url: 'https://example.com/github-copilot-enterprise',\n      source: 'GitHub',\n      categories: ['ai-tools', 'development', 'enterprise']\n    }\n  ];\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}